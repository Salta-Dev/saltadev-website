{% load static %}
<!-- Mobile menu overlay -->
<div id="mobile-menu-overlay" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] lg:hidden hidden" onclick="closeMobileMenu()"></div>

<!-- Mobile menu sidebar -->
<aside id="mobile-menu" class="fixed left-0 top-0 w-72 h-screen bg-sidebar-dark border-r border-[#342d2d] z-[70] lg:hidden transform -translate-x-full transition-transform duration-300 ease-in-out flex flex-col">
  <div class="p-6 pb-4 flex items-center justify-between border-b border-[#342d2d]">
    <a href="{% url 'home' %}" class="flex items-center gap-3">
      <img src="{% static 'assets/img/logo.webp' %}" alt="SaltaDev" class="size-10 object-contain"/>
      <div>
        <h1 class="text-lg font-bold tracking-tight text-white">SaltaDev</h1>
      </div>
    </a>
    <button onclick="closeMobileMenu()" class="p-2 rounded-lg hover:bg-[#2a2424] text-[#8e8584] hover:text-white transition-colors">
      <span class="material-symbols-outlined">close</span>
    </button>
  </div>

  <nav class="flex-1 px-4 py-6 flex flex-col gap-2 overflow-y-auto">
    {% with current_url=request.resolver_match.url_name %}
    <a class="group flex items-center gap-4 px-4 py-3.5 rounded-xl {% if current_url == 'dashboard' %}bg-[#2a2424] border border-[#3d2f2f] text-white shadow-lg shadow-black/20 relative overflow-hidden{% else %}hover:bg-[#2a2424] text-[#8e8584] hover:text-white{% endif %} transition-all duration-200" href="{% url 'dashboard' %}">
      {% if current_url == 'dashboard' %}<div class="absolute left-0 top-0 bottom-0 w-1 bg-primary"></div>{% endif %}
      <span class="material-symbols-outlined {% if current_url == 'dashboard' %}text-primary{% else %}group-hover:text-primary transition-colors{% endif %}">dashboard</span>
      <span class="font-medium tracking-wide">Dashboard</span>
    </a>
    <a class="group flex items-center gap-4 px-4 py-3.5 rounded-xl {% if current_url == 'profile_edit' %}bg-[#2a2424] border border-[#3d2f2f] text-white shadow-lg shadow-black/20 relative overflow-hidden{% else %}hover:bg-[#2a2424] text-[#8e8584] hover:text-white{% endif %} transition-all duration-200" href="{% url 'profile_edit' %}">
      {% if current_url == 'profile_edit' %}<div class="absolute left-0 top-0 bottom-0 w-1 bg-primary"></div>{% endif %}
      <span class="material-symbols-outlined {% if current_url == 'profile_edit' %}text-primary{% else %}group-hover:text-primary transition-colors{% endif %}">person</span>
      <span class="font-medium tracking-wide">Perfil</span>
    </a>
    <a class="group flex items-center gap-4 px-4 py-3.5 rounded-xl {% if 'benefit' in current_url %}bg-[#2a2424] border border-[#3d2f2f] text-white shadow-lg shadow-black/20 relative overflow-hidden{% else %}hover:bg-[#2a2424] text-[#8e8584] hover:text-white{% endif %} transition-all duration-200" href="{% url 'benefits_list' %}">
      {% if 'benefit' in current_url %}<div class="absolute left-0 top-0 bottom-0 w-1 bg-primary"></div>{% endif %}
      <span class="material-symbols-outlined {% if 'benefit' in current_url %}text-primary{% else %}group-hover:text-primary transition-colors{% endif %}">redeem</span>
      <span class="font-medium tracking-wide">Beneficios</span>
    </a>
    {% endwith %}
  </nav>

  <div class="p-6 border-t border-[#342d2d]">
    <a href="{% url 'logout' %}" class="w-full flex items-center justify-center gap-3 rounded-xl h-12 bg-[#2a2424] hover:bg-primary text-white text-sm font-bold transition-all duration-300 group shadow-lg hover:shadow-glow border border-[#3d2f2f] hover:border-primary">
      <span class="material-symbols-outlined text-[20px] group-hover:-translate-x-1 transition-transform duration-300">logout</span>
      <span>Cerrar sesi√≥n</span>
    </a>
  </div>
</aside>

<script>
  function openMobileMenu() {
    document.getElementById('mobile-menu').classList.remove('-translate-x-full');
    document.getElementById('mobile-menu-overlay').classList.remove('hidden');
    document.body.classList.add('overflow-hidden');
  }

  function closeMobileMenu() {
    document.getElementById('mobile-menu').classList.add('-translate-x-full');
    document.getElementById('mobile-menu-overlay').classList.add('hidden');
    document.body.classList.remove('overflow-hidden');
  }
</script>
